
PImage voiture;


class Voiture  {
  float posx;
  float posy;
  int sizeFactor;
  float acceleration = 0;
  
  void Move(float newposx, float newposy) {
    posx = newposx;
    posy = newposy;
  }
  
  void Size (int newSizeFactor){
    sizeFactor = newSizeFactor;
  }
  
}

class VoitureJoueur extends Voiture{
  
  VoitureJoueur(){
    posy = height*8;
    sizeFactor = 4;
  }
  
  void SuivreSouri(){
    
    // ON Recupere la difference entre la souris et la position de la voiture
    float dif = mouseX-posx-60;
    
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////acceleration a droite ou a gauche en fonction de la position de la souris ////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if(dif >= 50){
      acceleration = acceleration + 0.2;
      
    }
    
    if( dif <= -50){
      acceleration = acceleration - 0.2;
      
    }
    
    if(dif <= 50 && dif >= 10){
       acceleration = acceleration + 0.1;
       
    }
    if(dif <= 10 && dif >= -50){
       acceleration = acceleration - 0.1;
       
    }
    if(dif <= 10 && dif >= 0){
       acceleration = acceleration + 0.05;
       
    }
    if(dif <= 0 && dif >= -10){
       acceleration = acceleration - 0.05;
       
    }
    
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////LIMITE POUR L4ACCELERATION ///////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if(acceleration > 8){
       acceleration = 8;
       
    }  
    
    if(acceleration < -8){
       acceleration = -8;
       
    }
    
     //////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ///////////ON APPLIQUE LACCELERATION A LA POSITION DE LA VOITURE//////////////////////////////////////////////
     //////////////////////////////////////////////////////////////////////////////////////////////////////////////


    posx = posx + acceleration;
    
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////LIMITE POUR LA VOITURE///////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if(posx <= 550){
      posx = 550;
      if(acceleration < -1){
        acceleration = -1;
        
      }
    }
    
    if(posx >= width-600){
      posx = width-600;
      if(acceleration > 1){
        acceleration = 1;
        
      }
    }
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    //////////////////////////////Affichage de la voiture///////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////////////////////////////////////////
    image(voiture, posx, posy, voiture.width/sizeFactor, voiture.height/sizeFactor);
    
    
    
  }
  
}
